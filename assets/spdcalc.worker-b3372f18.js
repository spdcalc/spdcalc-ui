(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nt=Symbol("Comlink.proxy"),lt=Symbol("Comlink.endpoint"),wt=Symbol("Comlink.releaseProxy"),X=Symbol("Comlink.finalizer"),H=Symbol("Comlink.thrown"),rt=e=>typeof e=="object"&&e!==null||typeof e=="function",ft={canHandle:e=>rt(e)&&e[nt],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Q(e,t),[n,[n]]},deserialize(e){return e.start(),mt(e)}},bt={canHandle:e=>rt(e)&&H in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},_t=new Map([["proxy",ft],["throw",bt]]);function pt(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function Q(e,t=globalThis,n=["*"]){t.addEventListener("message",function i(_){if(!_||!_.data)return;if(!pt(n,_.origin)){console.warn(`Invalid origin '${_.origin}' for comlink proxy`);return}const{id:o,type:s,path:c}=Object.assign({path:[]},_.data),l=(_.data.argumentList||[]).map(A);let b;try{const w=c.slice(0,-1).reduce((v,C)=>v[C],e),j=c.reduce((v,C)=>v[C],e);switch(s){case"GET":b=j;break;case"SET":w[c.slice(-1)[0]]=A(_.data.value),b=!0;break;case"APPLY":b=j.apply(w,l);break;case"CONSTRUCT":{const v=new j(...l);b=xt(v)}break;case"ENDPOINT":{const{port1:v,port2:C}=new MessageChannel;Q(e,C),b=V(v,[v])}break;case"RELEASE":b=void 0;break;default:return}}catch(w){b={value:w,[H]:0}}Promise.resolve(b).catch(w=>({value:w,[H]:0})).then(w=>{const[j,v]=U(w);t.postMessage(Object.assign(Object.assign({},j),{id:o}),v),s==="RELEASE"&&(t.removeEventListener("message",i),it(t),X in e&&typeof e[X]=="function"&&e[X]())}).catch(w=>{const[j,v]=U({value:new TypeError("Unserializable return value"),[H]:0});t.postMessage(Object.assign(Object.assign({},j),{id:o}),v)})}),t.start&&t.start()}function yt(e){return e.constructor.name==="MessagePort"}function it(e){yt(e)&&e.close()}function mt(e,t){return Z(e,[],t)}function L(e){if(e)throw new Error("Proxy has been released and is not useable")}function st(e){return O(e,{type:"RELEASE"}).then(()=>{it(e)})}const F=new WeakMap,J="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(F.get(e)||0)-1;F.set(e,t),t===0&&st(e)});function ht(e,t){const n=(F.get(t)||0)+1;F.set(t,n),J&&J.register(e,t,e)}function vt(e){J&&J.unregister(e)}function Z(e,t=[],n=function(){}){let i=!1;const _=new Proxy(n,{get(o,s){if(L(i),s===wt)return()=>{vt(_),st(e),i=!0};if(s==="then"){if(t.length===0)return{then:()=>_};const c=O(e,{type:"GET",path:t.map(l=>l.toString())}).then(A);return c.then.bind(c)}return Z(e,[...t,s])},set(o,s,c){L(i);const[l,b]=U(c);return O(e,{type:"SET",path:[...t,s].map(w=>w.toString()),value:l},b).then(A)},apply(o,s,c){L(i);const l=t[t.length-1];if(l===lt)return O(e,{type:"ENDPOINT"}).then(A);if(l==="bind")return Z(e,t.slice(0,-1));const[b,w]=at(c);return O(e,{type:"APPLY",path:t.map(j=>j.toString()),argumentList:b},w).then(A)},construct(o,s){L(i);const[c,l]=at(s);return O(e,{type:"CONSTRUCT",path:t.map(b=>b.toString()),argumentList:c},l).then(A)}});return ht(_,e),_}function kt(e){return Array.prototype.concat.apply([],e)}function at(e){const t=e.map(U);return[t.map(n=>n[0]),kt(t.map(n=>n[1]))]}const ot=new WeakMap;function V(e,t){return ot.set(e,t),e}function xt(e){return Object.assign(e,{[nt]:!0})}function U(e){for(const[t,n]of _t)if(n.canHandle(e)){const[i,_]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},_]}return[{type:"RAW",value:e},ot.get(e)||[]]}function A(e){switch(e.type){case"HANDLER":return _t.get(e.name).deserialize(e.value);case"RAW":return e.value}}function O(e,t,n){return new Promise(i=>{const _=St();e.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==_||(e.removeEventListener("message",o),i(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:_},t),n)})}function St(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function jt(...e){}let r;const S=new Array(32).fill(void 0);S.push(void 0,null,!0,!1);function d(e){return S[e]}let M=S.length;function At(e){e<36||(S[e]=M,M=e)}function g(e){const t=d(e);return At(e),t}const ct=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});ct.decode();let D=new Uint8Array;function N(){return D.byteLength===0&&(D=new Uint8Array(r.memory.buffer)),D}function T(e,t){return ct.decode(N().subarray(e,e+t))}function u(e){M===S.length&&S.push(S.length+1);const t=M;return M=S[t],S[t]=e,t}let E=0;const B=new TextEncoder("utf-8"),Et=typeof B.encodeInto=="function"?function(e,t){return B.encodeInto(e,t)}:function(e,t){const n=B.encode(e);return t.set(n),{read:e.length,written:n.length}};function z(e,t,n){if(n===void 0){const c=B.encode(e),l=t(c.length);return N().subarray(l,l+c.length).set(c),E=c.length,l}let i=e.length,_=t(i);const o=N();let s=0;for(;s<i;s++){const c=e.charCodeAt(s);if(c>127)break;o[_+s]=c}if(s!==i){s!==0&&(e=e.slice(s)),_=n(_,i,i=s+e.length*3);const c=N().subarray(_+s,_+i),l=Et(e,c);s+=l.written}return E=s,_}function k(e){return e==null}let q=new Int32Array;function a(){return q.byteLength===0&&(q=new Int32Array(r.memory.buffer)),q}let $=new Float64Array;function G(){return $.byteLength===0&&($=new Float64Array(r.memory.buffer)),$}let K=new BigInt64Array;function It(){return K.byteLength===0&&(K=new BigInt64Array(r.memory.buffer)),K}function tt(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const _=e.description;return _==null?"Symbol":`Symbol(${_})`}if(t=="function"){const _=e.name;return typeof _=="string"&&_.length>0?`Function(${_})`:"Function"}if(Array.isArray(e)){const _=e.length;let o="[";_>0&&(o+=tt(e[0]));for(let s=1;s<_;s++)o+=", "+tt(e[s]);return o+="]",o}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let i;if(n.length>1)i=n[1];else return toString.call(e);if(i=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:i}function h(e,t){return G().subarray(e/8,e/8+t)}function Ot(e){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.get_json(_,u(e));var t=a()[_/4+0],n=a()[_/4+1],i=a()[_/4+2];if(i)throw g(n);return g(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Pt(e){try{const _=r.__wbindgen_add_to_stack_pointer(-16),o=z(e,r.__wbindgen_malloc,r.__wbindgen_realloc),s=E;r.get_params_from_json(_,o,s);var t=a()[_/4+0],n=a()[_/4+1],i=a()[_/4+2];if(i)throw g(n);return g(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Wt(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.get_all_crystal_meta(i);var e=a()[i/4+0],t=a()[i/4+1],n=a()[i/4+2];if(n)throw g(t);return g(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Rt(e){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.get_optimum_idler(_,u(e));var t=a()[_/4+0],n=a()[_/4+1],i=a()[_/4+2];if(i)throw g(n);return g(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function p(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`);return e.ptr}function Vt(e,t,n){try{const c=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,r.get_joint_spectrum(c,u(e),i,!k(n),k(n)?0:n);var _=a()[c/4+0],o=a()[c/4+1],s=a()[c/4+2];if(s)throw g(o);return W.__wrap(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Mt(e,t,n){try{const c=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,r.get_joint_spectrum_freq(c,u(e),i,!k(n),k(n)?0:n);var _=a()[c/4+0],o=a()[c/4+1],s=a()[c/4+2];if(s)throw g(o);return W.__wrap(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Tt(e,t,n){try{const c=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,r.get_joint_spectrum_sum_diff(c,u(e),i,!k(n),k(n)?0:n);var _=a()[c/4+0],o=a()[c/4+1],s=a()[c/4+2];if(s)throw g(o);return W.__wrap(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function zt(e){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.calculate_crystal_theta(_,u(e));var t=G()[_/8+0],n=a()[_/4+2],i=a()[_/4+3];if(i)throw g(n);return t}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Ct(e){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.calculate_periodic_poling(_,u(e));var t=G()[_/8+0],n=a()[_/4+2],i=a()[_/4+3];if(i)throw g(n);return t}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Ht(e){try{const s=r.__wbindgen_add_to_stack_pointer(-16);r.get_waist_positions(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],i=a()[s/4+2],_=a()[s/4+3];if(_)throw g(i);var o=h(t,n).slice();return r.__wbindgen_free(t,n*8),o}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Lt(e){try{const s=r.__wbindgen_add_to_stack_pointer(-16);r.get_refractive_indices(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],i=a()[s/4+2],_=a()[s/4+3];if(_)throw g(i);var o=h(t,n).slice();return r.__wbindgen_free(t,n*8),o}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Ft(e){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.calculate_jsi_plot_ranges(_,u(e));var t=a()[_/4+0],n=a()[_/4+1],i=a()[_/4+2];if(i)throw g(n);return g(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Jt(e,t,n){try{const b=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,r.get_hom_series_data(b,u(e),i,u(n));var _=a()[b/4+0],o=a()[b/4+1],s=a()[b/4+2],c=a()[b/4+3];if(c)throw g(s);var l=h(_,o).slice();return r.__wbindgen_free(_,o*8),l}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Ut(e,t){try{const l=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var n=t.ptr;t.ptr=0,r.get_hom_visibility(l,u(e),n);var i=a()[l/4+0],_=a()[l/4+1],o=a()[l/4+2],s=a()[l/4+3];if(s)throw g(o);var c=h(i,_).slice();return r.__wbindgen_free(i,_*8),c}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Dt(e,t,n){try{const c=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,r.get_hom_two_source_series_data(c,u(e),i,u(n));var _=a()[c/4+0],o=a()[c/4+1],s=a()[c/4+2];if(s)throw g(o);return g(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Nt(e,t){try{const s=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var n=t.ptr;t.ptr=0,r.get_hom_two_source_visibility(s,u(e),n);var i=a()[s/4+0],_=a()[s/4+1],o=a()[s/4+2];if(o)throw g(_);return g(i)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Bt(e,t){try{const s=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var n=t.ptr;t.ptr=0,r.get_heralding_results(s,u(e),n);var i=a()[s/4+0],_=a()[s/4+1],o=a()[s/4+2];if(o)throw g(_);return g(i)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function qt(e,t,n){try{const c=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,r.get_heralding_results_vs_waist(c,u(e),i,u(n));var _=a()[c/4+0],o=a()[c/4+1],s=a()[c/4+2];if(s)throw g(o);return g(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function $t(e,t,n){try{const c=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,r.get_heralding_results_vs_signal_theta(c,u(e),i,u(n));var _=a()[c/4+0],o=a()[c/4+1],s=a()[c/4+2];if(s)throw g(o);return g(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Gt(e,t,n){try{const c=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,r.get_heralding_results_vs_idler_theta(c,u(e),i,u(n));var _=a()[c/4+0],o=a()[c/4+1],s=a()[c/4+2];if(s)throw g(o);return g(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Kt(e,t,n){try{const l=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,p(n,x);var _=n.ptr;n.ptr=0,r.get_heralding_results_signal_vs_idler_waists(l,u(e),i,_);var o=a()[l/4+0],s=a()[l/4+1],c=a()[l/4+2];if(c)throw g(s);return g(o)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Yt(e,t,n){try{const l=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,p(n,x);var _=n.ptr;n.ptr=0,r.get_heralding_results_pump_vs_signal_idler_waists(l,u(e),i,_);var o=a()[l/4+0],s=a()[l/4+1],c=a()[l/4+2];if(c)throw g(s);return g(o)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Xt(e,t){try{const s=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var n=t.ptr;t.ptr=0,r.get_jsi_csi(s,u(e),n);var i=a()[s/4+0],_=a()[s/4+1],o=a()[s/4+2];if(o)throw g(_);return g(i)}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Qt(e,t,n){try{const w=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,p(n,P);var _=n.ptr;n.ptr=0,r.get_schmidt_pump_bw_vs_crystal_length(w,u(e),i,_);var o=a()[w/4+0],s=a()[w/4+1],c=a()[w/4+2],l=a()[w/4+3];if(l)throw g(c);var b=h(o,s).slice();return r.__wbindgen_free(o,s*8),b}finally{r.__wbindgen_add_to_stack_pointer(16)}}function Zt(e,t,n){try{const w=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,p(n,x);var _=n.ptr;n.ptr=0,r.get_schmidt_signal_vs_pump_waist(w,u(e),i,_);var o=a()[w/4+0],s=a()[w/4+1],c=a()[w/4+2],l=a()[w/4+3];if(l)throw g(c);var b=h(o,s).slice();return r.__wbindgen_free(o,s*8),b}finally{r.__wbindgen_add_to_stack_pointer(16)}}function te(e,t,n){try{const w=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,p(n,x);var _=n.ptr;n.ptr=0,r.get_schmidt_idler_vs_signal_waist(w,u(e),i,_);var o=a()[w/4+0],s=a()[w/4+1],c=a()[w/4+2],l=a()[w/4+3];if(l)throw g(c);var b=h(o,s).slice();return r.__wbindgen_free(o,s*8),b}finally{r.__wbindgen_add_to_stack_pointer(16)}}function ee(e,t,n){try{const w=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,p(n,x);var _=n.ptr;n.ptr=0,r.get_hom_visibility_signal_vs_pump_waist(w,u(e),i,_);var o=a()[w/4+0],s=a()[w/4+1],c=a()[w/4+2],l=a()[w/4+3];if(l)throw g(c);var b=h(o,s).slice();return r.__wbindgen_free(o,s*8),b}finally{r.__wbindgen_add_to_stack_pointer(16)}}function ne(e,t,n){try{const w=r.__wbindgen_add_to_stack_pointer(-16);p(t,y);var i=t.ptr;t.ptr=0,p(n,x);var _=n.ptr;n.ptr=0,r.get_hom_visibility_idler_vs_signal_waist(w,u(e),i,_);var o=a()[w/4+0],s=a()[w/4+1],c=a()[w/4+2],l=a()[w/4+3];if(l)throw g(c);var b=h(o,s).slice();return r.__wbindgen_free(o,s*8),b}finally{r.__wbindgen_add_to_stack_pointer(16)}}function re(e){try{const s=r.__wbindgen_add_to_stack_pointer(-16);r.delta_k_vs_crystal_theta(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],i=a()[s/4+2],_=a()[s/4+3];if(_)throw g(i);var o=h(t,n).slice();return r.__wbindgen_free(t,n*8),o}finally{r.__wbindgen_add_to_stack_pointer(16)}}function _e(e){try{const s=r.__wbindgen_add_to_stack_pointer(-16);r.center_jsi_vs_crystal_theta(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],i=a()[s/4+2],_=a()[s/4+3];if(_)throw g(i);var o=h(t,n).slice();return r.__wbindgen_free(t,n*8),o}finally{r.__wbindgen_add_to_stack_pointer(16)}}function ie(e){try{const s=r.__wbindgen_add_to_stack_pointer(-16);r.delta_k_vs_pp(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],i=a()[s/4+2],_=a()[s/4+3];if(_)throw g(i);var o=h(t,n).slice();return r.__wbindgen_free(t,n*8),o}finally{r.__wbindgen_add_to_stack_pointer(16)}}function se(e){try{const s=r.__wbindgen_add_to_stack_pointer(-16);r.center_jsi_vs_pp(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],i=a()[s/4+2],_=a()[s/4+3];if(_)throw g(i);var o=h(t,n).slice();return r.__wbindgen_free(t,n*8),o}finally{r.__wbindgen_add_to_stack_pointer(16)}}function ae(e){try{const s=r.__wbindgen_add_to_stack_pointer(-16);r.poling_domains(s,u(e));var t=a()[s/4+0],n=a()[s/4+1],i=a()[s/4+2],_=a()[s/4+3];if(_)throw g(i);var o=h(t,n).slice();return r.__wbindgen_free(t,n*8),o}finally{r.__wbindgen_add_to_stack_pointer(16)}}function oe(){r.browser_debug()}function I(e,t){try{return e.apply(this,t)}catch(n){r.__wbindgen_exn_store(u(n))}}class P{static __wrap(t){const n=Object.create(P.prototype);return n.ptr=t,n}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.__wbg_grid2d_free(t)}get x_min(){return r.__wbg_get_grid2d_x_min(this.ptr)}set x_min(t){r.__wbg_set_grid2d_x_min(this.ptr,t)}get x_max(){return r.__wbg_get_grid2d_x_max(this.ptr)}set x_max(t){r.__wbg_set_grid2d_x_max(this.ptr,t)}get y_min(){return r.__wbg_get_grid2d_y_min(this.ptr)}set y_min(t){r.__wbg_set_grid2d_y_min(this.ptr,t)}get y_max(){return r.__wbg_get_grid2d_y_max(this.ptr)}set y_max(t){r.__wbg_set_grid2d_y_max(this.ptr,t)}get x_size(){return r.__wbg_get_grid2d_x_size(this.ptr)>>>0}set x_size(t){r.__wbg_set_grid2d_x_size(this.ptr,t)}get y_size(){return r.__wbg_get_grid2d_y_size(this.ptr)>>>0}set y_size(t){r.__wbg_set_grid2d_y_size(this.ptr,t)}static new(t,n,i,_,o,s){const c=r.grid2d_new(t,n,i,_,o,s);return P.__wrap(c)}}class y{static __wrap(t){const n=Object.create(y.prototype);return n.ptr=t,n}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.__wbg_integrationconfig_free(t)}get ls_min(){return r.__wbg_get_grid2d_x_min(this.ptr)}set ls_min(t){r.__wbg_set_grid2d_x_min(this.ptr,t)}get ls_max(){return r.__wbg_get_grid2d_x_max(this.ptr)}set ls_max(t){r.__wbg_set_grid2d_x_max(this.ptr,t)}get li_min(){return r.__wbg_get_grid2d_y_min(this.ptr)}set li_min(t){r.__wbg_set_grid2d_y_min(this.ptr,t)}get li_max(){return r.__wbg_get_grid2d_y_max(this.ptr)}set li_max(t){r.__wbg_set_grid2d_y_max(this.ptr,t)}get size(){return r.__wbg_get_grid2d_x_size(this.ptr)>>>0}set size(t){r.__wbg_set_grid2d_x_size(this.ptr,t)}static new(t,n,i,_,o){const s=r.integrationconfig_new(t,n,i,_,o);return y.__wrap(s)}swapped(){const t=r.integrationconfig_swapped(this.ptr);return y.__wrap(t)}}class W{static __wrap(t){const n=Object.create(W.prototype);return n.ptr=t,n}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.__wbg_jointspectrum_free(t)}intensities(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.jointspectrum_intensities(_,this.ptr);var t=a()[_/4+0],n=a()[_/4+1],i=h(t,n).slice();return r.__wbindgen_free(t,n*8),i}finally{r.__wbindgen_add_to_stack_pointer(16)}}amplitudes(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.jointspectrum_amplitudes(_,this.ptr);var t=a()[_/4+0],n=a()[_/4+1],i=h(t,n).slice();return r.__wbindgen_free(t,n*8),i}finally{r.__wbindgen_add_to_stack_pointer(16)}}phases(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.jointspectrum_phases(_,this.ptr);var t=a()[_/4+0],n=a()[_/4+1],i=h(t,n).slice();return r.__wbindgen_free(t,n*8),i}finally{r.__wbindgen_add_to_stack_pointer(16)}}schmidt_number(){return r.__wbg_get_grid2d_x_min(this.ptr)}}class x{static __wrap(t){const n=Object.create(x.prototype);return n.ptr=t,n}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.__wbg_waistranges_free(t)}get wx_min(){return r.__wbg_get_grid2d_x_min(this.ptr)}set wx_min(t){r.__wbg_set_grid2d_x_min(this.ptr,t)}get wx_max(){return r.__wbg_get_grid2d_x_max(this.ptr)}set wx_max(t){r.__wbg_set_grid2d_x_max(this.ptr,t)}get wy_min(){return r.__wbg_get_grid2d_y_min(this.ptr)}set wy_min(t){r.__wbg_set_grid2d_y_min(this.ptr,t)}get wy_max(){return r.__wbg_get_grid2d_y_max(this.ptr)}set wy_max(t){r.__wbg_set_grid2d_y_max(this.ptr,t)}get x_size(){return r.__wbg_get_grid2d_x_size(this.ptr)>>>0}set x_size(t){r.__wbg_set_grid2d_x_size(this.ptr,t)}get y_size(){return r.__wbg_get_grid2d_y_size(this.ptr)>>>0}set y_size(t){r.__wbg_set_grid2d_y_size(this.ptr,t)}static new(t,n,i,_,o,s){const c=r.grid2d_new(t,n,i,_,o,s);return x.__wrap(c)}}async function ce(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(i){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function ut(){const e={};return e.wbg={},e.wbg.__wbindgen_object_drop_ref=function(t){g(t)},e.wbg.__wbindgen_string_new=function(t,n){const i=T(t,n);return u(i)},e.wbg.__wbindgen_error_new=function(t,n){const i=new Error(T(t,n));return u(i)},e.wbg.__wbindgen_object_clone_ref=function(t){const n=d(t);return u(n)},e.wbg.__wbindgen_string_get=function(t,n){const i=d(n),_=typeof i=="string"?i:void 0;var o=k(_)?0:z(_,r.__wbindgen_malloc,r.__wbindgen_realloc),s=E;a()[t/4+1]=s,a()[t/4+0]=o},e.wbg.__wbindgen_number_get=function(t,n){const i=d(n),_=typeof i=="number"?i:void 0;G()[t/8+1]=k(_)?0:_,a()[t/4+0]=!k(_)},e.wbg.__wbindgen_is_bigint=function(t){return typeof d(t)=="bigint"},e.wbg.__wbindgen_bigint_from_u64=function(t){const n=BigInt.asUintN(64,t);return u(n)},e.wbg.__wbindgen_jsval_eq=function(t,n){return d(t)===d(n)},e.wbg.__wbindgen_is_string=function(t){return typeof d(t)=="string"},e.wbg.__wbindgen_boolean_get=function(t){const n=d(t);return typeof n=="boolean"?n?1:0:2},e.wbg.__wbindgen_is_object=function(t){const n=d(t);return typeof n=="object"&&n!==null},e.wbg.__wbindgen_is_undefined=function(t){return d(t)===void 0},e.wbg.__wbindgen_in=function(t,n){return d(t)in d(n)},e.wbg.__wbindgen_jsval_loose_eq=function(t,n){return d(t)==d(n)},e.wbg.__wbindgen_as_number=function(t){return+d(t)},e.wbg.__wbindgen_number_new=function(t){return u(t)},e.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(t,n){const i=d(t)[d(n)];return u(i)},e.wbg.__wbg_set_f975102236d3c502=function(t,n,i){d(t)[g(n)]=g(i)},e.wbg.__wbg_String_b9412f8799faab3e=function(t,n){const i=String(d(n)),_=z(i,r.__wbindgen_malloc,r.__wbindgen_realloc),o=E;a()[t/4+1]=o,a()[t/4+0]=_},e.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return u(t)},e.wbg.__wbg_stack_658279fe44541cf6=function(t,n){const i=d(n).stack,_=z(i,r.__wbindgen_malloc,r.__wbindgen_realloc),o=E;a()[t/4+1]=o,a()[t/4+0]=_},e.wbg.__wbg_error_f851667af71bcfc6=function(t,n){try{console.error(T(t,n))}finally{r.__wbindgen_free(t,n)}},e.wbg.__wbg_now_8172cd917e5eda6b=function(t){return d(t).now()},e.wbg.__wbg_log_4b5638ad60bdc54a=function(t){console.log(d(t))},e.wbg.__wbg_log_89ca282a8a49b121=function(t,n){console.log(d(t),d(n))},e.wbg.__wbg_get_57245cc7d7c7619d=function(t,n){const i=d(t)[n>>>0];return u(i)},e.wbg.__wbg_length_6e3bbe7c8bd4dbd8=function(t){return d(t).length},e.wbg.__wbg_new_1d9a920c6bfc44a8=function(){const t=new Array;return u(t)},e.wbg.__wbindgen_is_function=function(t){return typeof d(t)=="function"},e.wbg.__wbg_newnoargs_b5b063fc6c2f0376=function(t,n){const i=new Function(T(t,n));return u(i)},e.wbg.__wbg_next_579e583d33566a86=function(t){const n=d(t).next;return u(n)},e.wbg.__wbg_next_aaef7c8aa5e212ac=function(){return I(function(t){const n=d(t).next();return u(n)},arguments)},e.wbg.__wbg_done_1b73b0672e15f234=function(t){return d(t).done},e.wbg.__wbg_value_1ccc36bc03462d71=function(t){const n=d(t).value;return u(n)},e.wbg.__wbg_iterator_6f9d4f28845f426c=function(){return u(Symbol.iterator)},e.wbg.__wbg_get_765201544a2b6869=function(){return I(function(t,n){const i=Reflect.get(d(t),d(n));return u(i)},arguments)},e.wbg.__wbg_call_97ae9d8645dc388b=function(){return I(function(t,n){const i=d(t).call(d(n));return u(i)},arguments)},e.wbg.__wbg_new_0b9bfdd97583284e=function(){const t=new Object;return u(t)},e.wbg.__wbg_self_6d479506f72c6a71=function(){return I(function(){const t=self.self;return u(t)},arguments)},e.wbg.__wbg_window_f2557cc78490aceb=function(){return I(function(){const t=window.window;return u(t)},arguments)},e.wbg.__wbg_globalThis_7f206bda628d5286=function(){return I(function(){const t=globalThis.globalThis;return u(t)},arguments)},e.wbg.__wbg_global_ba75c50d1cf384f4=function(){return I(function(){const t=global.global;return u(t)},arguments)},e.wbg.__wbg_set_a68214f35c417fa9=function(t,n,i){d(t)[n>>>0]=g(i)},e.wbg.__wbg_isArray_27c46c67f498e15d=function(t){return Array.isArray(d(t))},e.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(t){let n;try{n=d(t)instanceof ArrayBuffer}catch{n=!1}return n},e.wbg.__wbg_isSafeInteger_dfa0593e8d7ac35a=function(t){return Number.isSafeInteger(d(t))},e.wbg.__wbg_entries_65a76a413fc91037=function(t){const n=Object.entries(d(t));return u(n)},e.wbg.__wbg_buffer_3f3d764d4747d564=function(t){const n=d(t).buffer;return u(n)},e.wbg.__wbg_new_8c3f0052272a457a=function(t){const n=new Uint8Array(d(t));return u(n)},e.wbg.__wbg_set_83db9690f9353e79=function(t,n,i){d(t).set(d(n),i>>>0)},e.wbg.__wbg_length_9e1ae1900cb0fbd5=function(t){return d(t).length},e.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(t){let n;try{n=d(t)instanceof Uint8Array}catch{n=!1}return n},e.wbg.__wbindgen_bigint_get_as_i64=function(t,n){const i=d(n),_=typeof i=="bigint"?i:void 0;It()[t/8+1]=k(_)?0n:_,a()[t/4+0]=!k(_)},e.wbg.__wbindgen_debug_string=function(t,n){const i=tt(d(n)),_=z(i,r.__wbindgen_malloc,r.__wbindgen_realloc),o=E;a()[t/4+1]=o,a()[t/4+0]=_},e.wbg.__wbindgen_throw=function(t,n){throw new Error(T(t,n))},e.wbg.__wbindgen_memory=function(){const t=r.memory;return u(t)},e}function gt(e,t){return r=e.exports,et.__wbindgen_wasm_module=t,K=new BigInt64Array,$=new Float64Array,q=new Int32Array,D=new Uint8Array,r}function ue(e){const t=ut();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const n=new WebAssembly.Instance(e,t);return gt(n,e)}async function et(e){typeof e>"u"&&(e=new URL("/spdcalc-ui/assets/spdcalcwasm_bg-75ea4021.wasm",self.location));const t=ut();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:i}=await ce(await e,t);return gt(n,i)}var dt=Object.freeze({__proto__:null,Grid2D:P,IntegrationConfig:y,JointSpectrum:W,WaistRanges:x,browser_debug:oe,calculate_crystal_theta:zt,calculate_jsi_plot_ranges:Ft,calculate_periodic_poling:Ct,center_jsi_vs_crystal_theta:_e,center_jsi_vs_pp:se,default:et,delta_k_vs_crystal_theta:re,delta_k_vs_pp:ie,get_all_crystal_meta:Wt,get_heralding_results:Bt,get_heralding_results_pump_vs_signal_idler_waists:Yt,get_heralding_results_signal_vs_idler_waists:Kt,get_heralding_results_vs_idler_theta:Gt,get_heralding_results_vs_signal_theta:$t,get_heralding_results_vs_waist:qt,get_hom_series_data:Jt,get_hom_two_source_series_data:Dt,get_hom_two_source_visibility:Nt,get_hom_visibility:Ut,get_hom_visibility_idler_vs_signal_waist:ne,get_hom_visibility_signal_vs_pump_waist:ee,get_joint_spectrum:Vt,get_joint_spectrum_freq:Mt,get_joint_spectrum_sum_diff:Tt,get_jsi_csi:Xt,get_json:Ot,get_optimum_idler:Rt,get_params_from_json:Pt,get_refractive_indices:Lt,get_schmidt_idler_vs_signal_waist:te,get_schmidt_pump_bw_vs_crystal_length:Qt,get_schmidt_signal_vs_pump_waist:Zt,get_waist_positions:Ht,initSync:ue,poling_domains:ae});const Y=et();async function f(e,...t){await Y;const n=dt[e];if(!n)throw new Error(`Method ${e} not defined`);try{let i=n.apply(dt,t);return jt(`Worker: Running ${e}`,t,`
Returned:`,i),i}catch(i){throw new Error(i)}}async function m(e){return await Y,y.new(e.ls_min,e.ls_max,e.li_min,e.li_max,e.size)}async function R(e){return await Y,x.new(e.x_range[0],e.x_range[1],e.y_range[0],e.y_range[1],e.x_count,e.y_count)}async function ge(e){return await Y,P.new(e.x_range[0],e.x_range[1],e.y_range[0],e.y_range[1],e.x_count,e.y_count)}async function de(e){return f("get_json",e)}async function le(e){return f("get_params_from_json",e)}async function we(){return f("get_all_crystal_meta")}async function fe(e){return f("get_optimum_idler",e)}async function be(e,t){const n=await f("get_joint_spectrum",e,await m(t)),i={intensities:n.intensities(),amplitudes:n.amplitudes(),phases:n.phases(),schmidt_number:n.schmidt_number()};return V(i,Object.values(i).filter(_=>_==null?void 0:_.buffer).map(_=>_.buffer))}async function pe(e,t){const n=await f("get_joint_spectrum_freq",e,await m(t)),i={intensities:n.intensities(),amplitudes:n.amplitudes(),phases:n.phases(),schmidt_number:n.schmidt_number()};return V(i,Object.values(i).filter(_=>_==null?void 0:_.buffer).map(_=>_.buffer))}async function ye(e,t){const n=await f("get_joint_spectrum_sum_diff",e,await m(t)),i={intensities:n.intensities(),amplitudes:n.amplitudes(),phases:n.phases(),schmidt_number:n.schmidt_number()};return V(i,Object.values(i).filter(_=>_==null?void 0:_.buffer).map(_=>_.buffer))}async function me(e,t){const n=await f("get_jsi_csi",e,await m(t));return V(n,n.buffer)}async function he(e){return f("calculate_crystal_theta",e)}async function ve(e){return f("calculate_periodic_poling",e)}async function ke(e){return f("get_waist_positions",e)}async function xe(e){return f("get_refractive_indices",e)}async function Se(e){return f("calculate_jsi_plot_ranges",e)}async function je(e,t,n){return f("get_hom_series_data",e,await m(t),n)}async function Ae(e,t){return f("get_hom_visibility",e,await m(t))}async function Ee(e,t,n){return f("get_hom_two_source_series_data",e,await m(t),n)}async function Ie(e,t){return f("get_hom_two_source_visibility",e,await m(t))}async function Oe(e,t,n,i,_){return e.signal_waist=n||e.signal_waist,e.idler_waist=i||e.idler_waist,e.pump_waist=_||e.pump_waist,f("get_heralding_results",e,await m(t))}async function Pe(e,t,n){return f("get_heralding_results_vs_waist",e,await m(t),n)}async function We(e,t,n){return f("get_heralding_results_vs_signal_theta",e,await m(t),n)}async function Re(e,t,n){return f("get_heralding_results_vs_idler_theta",e,await m(t),n)}async function Ve(e,t,n){return f("get_heralding_results_signal_vs_idler_waists",e,await m(t),await R(n))}async function Me(e,t,n){return f("get_heralding_results_pump_vs_signal_idler_waists",e,await m(t),await R(n))}async function Te(e,t,n){return f("get_schmidt_pump_bw_vs_crystal_length",e,await m(t),await ge(n))}async function ze(e,t,n){return f("get_schmidt_signal_vs_pump_waist",e,await m(t),await R(n))}async function Ce(e,t,n){return f("get_schmidt_idler_vs_signal_waist",e,await m(t),await R(n))}async function He(e,t,n){return f("get_hom_visibility_signal_vs_pump_waist",e,await m(t),await R(n))}async function Le(e,t,n){return f("get_hom_visibility_idler_vs_signal_waist",e,await m(t),await R(n))}async function Fe(e){return f("delta_k_vs_crystal_theta",e)}async function Je(e){return f("center_jsi_vs_crystal_theta",e)}async function Ue(e){return f("delta_k_vs_pp",e)}async function De(e){return f("center_jsi_vs_pp",e)}async function Ne(e){return f("poling_domains",e)}var Be=Object.freeze({__proto__:null,calculateCrystalTheta:he,calculateJSIRanges:Se,calculatePeriodicPoling:ve,fetchCrystalMeta:we,getCenterJsiVsCrystalTheta:Je,getCenterJsiVsPP:De,getDeltaKVsCrystalTheta:Fe,getDeltaKVsPP:Ue,getHOMSeries:je,getHOMTwoSourceSeries:Ee,getHOMTwoSourceVisibility:Ie,getHOMVisibility:Ae,getHeraldingResults:Oe,getHeraldingResultsPumpVsSignalIdlerWaists:Me,getHeraldingResultsSignalVsIdlerWaists:Ve,getHeraldingResultsVsIdlerTheta:Re,getHeraldingResultsVsSignalTheta:We,getHeraldingResultsVsWaist:Pe,getHomVisIdlerWaistVsSignalWaist:Le,getHomVisSignalWaistVsPumpWaist:He,getJSICSI:me,getJointSpectrum:be,getJointSpectrumFreq:pe,getJointSpectrumSumDiff:ye,getJson:de,getOptimumIdler:fe,getParamsFromJson:le,getPolingDomains:Ne,getRefractiveIndices:xe,getSchmidtIdlerWaistVsSignalWaist:Ce,getSchmidtPumpBwVsCrystalLength:Te,getSchmidtSignalWaistVsPumpWaist:ze,getWaistPositions:ke});Q(Be)})();
